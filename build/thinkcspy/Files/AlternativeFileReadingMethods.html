<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>17.5. Alternative File Reading Methods &#8212; How to Think like a Computer Scientist: Interactive Edition</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="../_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/showEval.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/showEval.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="17.6. Writing Text Files" href="WritingTextFiles.html" />
    <link rel="prev" title="17.4. Iterating over lines in a file" href="Iteratingoverlinesinafile.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'thinkcspy';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "4.0.1";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = true;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'thinkcspy';
  eBookConfig.runestone_version = '3.0.5';
</script>
<style>
.navLink{
	display: block;
  position: static;
  font-size: 3rem;
}

@media (max-width: 600px) {
    /* Styling definitions for chevron function in bookfuncs.js */
	.navLink{
		display: block;
	}
}

#relations-next {
  float: right;
}

#relations-prev {
  float: left;
}

.navLink a {
	color: #999;
}
</style>

  </head>
  <body>



<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="alternative-file-reading-methods">
<h1>17.5. Alternative File Reading Methods<a class="headerlink" href="#alternative-file-reading-methods" title="Permalink to this headline">Â¶</a></h1>
<p>Again, recall the contents of the qbdata.txt file.</p>
<pre id="qbdata.txt">
Colt McCoy QB CLE  135 222 1576    6   9   60.8%   74.5
Josh Freeman QB TB 291 474 3451    25  6   61.4%   95.9
Michael Vick QB PHI    233 372 3018    21  6   62.6%   100.2
Matt Schaub QB HOU 365 574 4370    24  12  63.6%   92.0
Philip Rivers QB SD    357 541 4710    30  13  66.0%   101.8
Matt Hasselbeck QB SEA 266 444 3001    12  17  59.9%   73.2
Jimmy Clausen QB CAR   157 299 1558    3   9   52.5%   58.4
Joe Flacco QB BAL  306 489 3622    25  10  62.6%   93.6
Kyle Orton QB DEN  293 498 3653    20  9   58.8%   87.5
Jason Campbell QB OAK  194 329 2387    13  8   59.0%   84.5
Peyton Manning QB IND  450 679 4700    33  17  66.3%   91.9
Drew Brees QB NO   448 658 4620    33  22  68.1%   90.9
Matt Ryan QB ATL   357 571 3705    28  9   62.5%   91.0
Matt Cassel QB KC  262 450 3116    27  7   58.2%   93.0
Mark Sanchez QB NYJ    278 507 3291    17  13  54.8%   75.3
Brett Favre QB MIN 217 358 2509    11  19  60.6%   69.9
David Garrard QB JAC   236 366 2734    23  15  64.5%   90.8
Eli Manning QB NYG 339 539 4002    31  25  62.9%   85.3
Carson Palmer QB CIN   362 586 3970    26  20  61.8%   82.4
Alex Smith QB SF   204 342 2370    14  10  59.6%   82.1
Chad Henne QB MIA  301 490 3301    15  19  61.4%   75.4
Tony Romo QB DAL   148 213 1605    11  7   69.5%   94.9
Jay Cutler QB CHI  261 432 3274    23  16  60.4%   86.3
Jon Kitna QB DAL   209 318 2365    16  12  65.7%   88.9
Tom Brady QB NE    324 492 3900    36  4   65.9%   111.0
Ben Roethlisberger QB PIT  240 389 3200    17  5   61.7%   97.0
Kerry Collins QB TEN   160 278 1823    14  8   57.6%   82.2
Derek Anderson QB ARI  169 327 2065    7   10  51.7%   65.9
Ryan Fitzpatrick QB BUF    255 441 3000    23  15  57.8%   81.8
Donovan McNabb QB WAS  275 472 3377    14  15  58.3%   77.1
Kevin Kolb QB PHI  115 189 1197    7   7   60.8%   76.1
Aaron Rodgers QB GB    312 475 3922    28  11  65.7%   101.2
Sam Bradford QB STL    354 590 3512    18  15  60.0%   76.5
Shaun Hill QB DET  257 416 2686    16  12  61.8%   81.3
</pre><p>In addition to the <code class="docutils literal"><span class="pre">for</span></code> loop, Python provides three methods to read data
from the input file. The <code class="docutils literal"><span class="pre">readline</span></code> method reads one line from the file and
returns it as a string. The string returned by <code class="docutils literal"><span class="pre">readline</span></code> will contain the
newline character at the end. This method returns the empty string when it
reaches the end of the file. The <code class="docutils literal"><span class="pre">readlines</span></code> method returns the contents of
the entire file as a list of strings, where each item in the list represents
one line of the file. It is also possible to read the entire file into a
single string with <code class="docutils literal"><span class="pre">read</span></code>. <a class="reference internal" href="#filemethods2a"><span class="std std-ref">Table 2</span></a> summarizes these methods
and the following session shows them in action.</p>
<p>Note that we need to reopen the file before each read so that we start from
the beginning. Each file has a marker that denotes the current read position
in the file. Any time one of the read methods is called the marker is moved to
the character immediately following the last character returned. In the case
of <code class="docutils literal"><span class="pre">readline</span></code> this moves the marker to the first character of the next line
in the file. In the case of <code class="docutils literal"><span class="pre">read</span></code> or <code class="docutils literal"><span class="pre">readlines</span></code> the marker is moved to
the end of the file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;qbdata.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aline</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aline</span>
<span class="go">&#39;Colt McCoy QB, CLE\t135\t222\t1576\t6\t9\t60.8%\t74.5\n&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;qbdata.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linelist</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">linelist</span><span class="p">))</span>
<span class="go">34</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">linelist</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span>
<span class="go">[&#39;Colt McCoy QB CLE\t135\t222\t1576\t6\t9\t60.8%\t74.5\n&#39;,</span>
<span class="go"> &#39;Josh Freeman QB TB\t291\t474\t3451\t25\t6\t61.4%\t95.9\n&#39;,</span>
<span class="go"> &#39;Michael Vick QB PHI\t233\t372\t3018\t21\t6\t62.6%\t100.2\n&#39;,</span>
<span class="go"> &#39;Matt Schaub QB HOU\t365\t574\t4370\t24\t12\t63.6%\t92.0\n&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;qbdata.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filestring</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filestring</span><span class="p">))</span>
<span class="go">1708</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">filestring</span><span class="p">[:</span><span class="mi">256</span><span class="p">])</span>
<span class="go">Colt McCoy QB CLE   135     222     1576    6       9       60.8%   74.5</span>
<span class="go">Josh Freeman QB TB  291     474     3451    25      6       61.4%   95.9</span>
<span class="go">Michael Vick QB PHI 233     372     3018    21      6       62.6%   100.2</span>
<span class="go">Matt Schaub QB HOU  365     574     4370    24      12      63.6%   92.0</span>
<span class="go">Philip Rivers QB SD 357     541     4710    30      13      66.0%   101.8</span>
<span class="go">Matt Ha</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils" id="filemethods2a">
<colgroup>
<col width="26%" />
<col width="30%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Method Name</strong></th>
<th class="head"><strong>Use</strong></th>
<th class="head"><strong>Explanation</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">write</span></code></td>
<td><code class="docutils literal"><span class="pre">filevar.write(astring)</span></code></td>
<td>Add astring to the end of the file.
filevar must refer to a file that has
been  opened for writing.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">read(n)</span></code></td>
<td><code class="docutils literal"><span class="pre">filevar.read()</span></code></td>
<td>Reads and returns a string of <code class="docutils literal"><span class="pre">n</span></code>
characters, or the entire file as a
single string if  n is not provided.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">readline(n)</span></code></td>
<td><code class="docutils literal"><span class="pre">filevar.readline()</span></code></td>
<td>Returns the next line of the file with
all text up to and including the
newline character. If n is provided as
a parameter than only n characters
will be returned if the line is longer
than <code class="docutils literal"><span class="pre">n</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">readlines(n)</span></code></td>
<td><code class="docutils literal"><span class="pre">filevar.readlines()</span></code></td>
<td>Returns a list of strings, each
representing a single line of the file.
If n is not provided then all lines of
the file are returned. If n is provided
then n characters are read but n is
rounded up so that an entire line is
returned.</td>
</tr>
</tbody>
</table>
<p>Now letâs look at another method of reading our file using a <code class="docutils literal"><span class="pre">while</span></code> loop.  This is important because many other programming languages do not support the <code class="docutils literal"><span class="pre">for</span></code> loop style for reading files but they do support the pattern weâll show you here.</p>

<div data-childcomponent="files_while" class="runestone explainer ac_section alert alert-warning">

<textarea data-component="activecode" id=files_while data-lang="python"    data-timelimit=25000   data-audio=''     >
infile = open("qbdata.txt", "r")
line = infile.readline()
while line:
    values = line.split()
    print('QB ', values[0], values[1], 'had a rating of ', values[10] )
    line = infile.readline()

infile.close()
</textarea>
</div>
<p>There are several important things to notice in this code:</p>
<p>On line 2 we have the statement <code class="docutils literal"><span class="pre">line</span> <span class="pre">=</span> <span class="pre">infile.readline()</span></code>.
We call this initial read the <strong>priming read</strong>.
It is very important because the while condition needs to have a value for the <code class="docutils literal"><span class="pre">line</span></code> variable.</p>
<p>The <code class="docutils literal"><span class="pre">readline</span></code> method will return the
empty string if there is no more data in the file.
An empty string is an empty sequence of characters.
When Python is looking for a Boolean condition, as in <code class="docutils literal"><span class="pre">while</span> <span class="pre">line:</span></code>,
it treats an empty sequence type as <code class="docutils literal"><span class="pre">False</span></code>, and a non-empty sequence as <code class="docutils literal"><span class="pre">True</span></code>.
Remember that a
blank line in the file actually has a single character, the <code class="docutils literal"><span class="pre">\n</span></code> character (newline).
So, the only way that a line of data from the
file can be empty is if you are reading at the end of the file, and the <code class="docutils literal"><span class="pre">while</span></code> condition becomes <code class="docutils literal"><span class="pre">False</span></code>.</p>
<p>Finally, notice that the last line of the body of the <code class="docutils literal"><span class="pre">while</span></code> loop performs another <code class="docutils literal"><span class="pre">readline</span></code>.  This statement will reassign the variable <code class="docutils literal"><span class="pre">line</span></code> to the next line of the file.  It represents the <cite>change of state</cite> that is necessary for the iteration to
function correctly.  Without it, there would be an infinite loop processing the same line of data over and over.</p>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - 17.4. Iterating over lines in a file' data-toggle="tooltip">
    <a href="Iteratingoverlinesinafile.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>

  <li id="relations-next" class="navLink" title='Next Section - 17.6. Writing Text Files' data-toggle="tooltip" >
    <a href="WritingTextFiles.html" style="color:#999">
      Next Section - 17.6. Writing Text Files
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <li class="navLink" style="text-align: center" title='17. Files' data-toggle="tooltip" >
    <a href="../CMPS5P/l17.html">
      <i id="relationsNextIcon"  class='nextNav glyphicon glyphicon-chevron-up'></i>
    </a>
  </li>


<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<p style="line-height: 2em">&nbsp;</p>

  </body>
</html>